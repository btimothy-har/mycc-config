The following task is a refactoring of an existing functionality that already exists in this codebase:

#$ARGUMENTS

Using the agents and tools at your disposal, consider and think deeply about how we should approach this work, developing a comprehensive implementation plan. The plan should focus on implementation ONLY.

Alongside your plan, include codebase context that is relevant to this work, such as where and how the functionality is currently being implemented in the codebase, utility functions, existing architecture, etc.
